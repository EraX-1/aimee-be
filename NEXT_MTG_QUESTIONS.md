# 次回MTGでの確認事項

**日付**: 2025-10-06作成
**プロジェクト**: AIMEE Backend API v2.0

---

## 📝 確認が必要な3つのポイント

### 1. データ連携方法
**RealWorksManagerから5分おきにアップロードされるデータへのアクセス方法を教えてください。**
- ファイル共有（ネットワークドライブ、SMB等）
- クラウドストレージ（S3、Azure Blob等）
- FTP/SFTP
- その他

> **補足**: 現在の想定では、CSVファイルを定期的に読み取ってMySQLに投入する設計です。アクセス方法により実装が変わります。

---

### 2. 承認・否認データの連携方法
**UIで「承認」「否認」したステータスをどのように共有しますか？**

**オプションA（推奨）**: 共有データベース方式
- AIMEEのMySQLに承認テーブル（`ai_proposals`, `proposal_decisions`）を作成
- RealWorksManagerから定期的にSELECTで参照
- シンプルで確実

**オプションB**: API連携方式
- AIMEEがREST APIを提供
- RealWorksManagerがAPIを呼び出して承認状態を取得
- リアルタイム性が高い

**オプションC**: ファイル出力方式
- 承認データをCSV/JSONで出力
- RealWorksManagerが読み取り
- 既存のファイルベース処理と統一

> **推奨**: オプションA（共有DB）が最もシンプルで確実です。

---

### 3. 配置転換通知の実装方法
**配置転換承認時のPC通知について、確認させてください。**

**想定仕様:**
- 通知受付アプリは既に各作業PCで起動済み
- Windows通知を受け取れる状態

**実装方法の選択肢:**

**オプションA（推奨）**: WebSocket / HTTP API
- 通知受付アプリがHTTPエンドポイントを公開
- AIMEEから `POST http://{作業PC_IP}:8080/notify` で通知
- または WebSocket でプッシュ通知
- 汎用的で実装が簡単

**オプションB**: Windows通知サービス
- Windows Push Notification Services (WNS)
- クラウド経由の通知
- 複雑だが信頼性が高い

**オプションC**: 社内メッセージング連携
- Slack/Teams等の既存ツール経由
- 実装が最も簡単

> **質問**: 通知受付アプリはどのような仕組みで通知を受け取りますか？（HTTPエンドポイント、WebSocket、その他）

---

## 🎯 簡潔版（コピペ用）

```
次回MTGでの確認事項：

1. RealWorksManagerから5分おきにアップロードされるデータへのアクセス方法
   - ファイル共有、クラウドストレージ（S3等）、FTP、その他？

2. 承認・否認ステータスの連携方法
   - 推奨: AIMEEのMySQLに承認テーブルを作成し、RealWorksManagerから参照
   - 他の方法（API、ファイル出力）も可能

3. 配置転換通知の実装方法
   - 作業PC上の通知受付アプリは、どのように通知を受け取りますか？
   - HTTPエンドポイント、WebSocket、その他？
```

---

## ✅ 現在の対応状況

### データフロー
```
CSVファイル配置（5分おき）
    ↓
バッチ処理（別アプリ）～最大30秒
    ↓
MySQL DB投入
    ↓
AIMEEアラート検出（< 1秒）
    ↓
フロントエンド表示
```

**リアルタイム性**: 5分間隔 + バッチ処理30秒 = **ほぼリアルタイム** ✅

### 実装準備完了

- ✅ **アラート検出**: < 1秒で基準判定可能
- ✅ **承認管理**: テーブル設計準備完了（連携方法確定後に実装）
- ✅ **通知機能**: 実装準備完了（エンドポイント仕様確定後）

---

## 📊 アラート基準（やばい基準）

| 基準項目 | 閾値 | 優先度 |
|---------|------|--------|
| **補正工程残件数（品川）** | 50件以上 | High |
| **補正工程残件数（大阪）** | 100件以上 | High |
| **SS案件受領件数** | 1,000件以上 | Critical |
| **長時間配置** | 60分以上 | Medium |
| **エントリバランス** | 差30%以上 | Medium |

これらの基準は管理者ノウハウ（RAGコンテキスト）として既に投入済みです。

---

**作成日**: 2025-10-06
**作成者**: Claude Code
